JMeter is now starting.


To get get a shell session on the master you only need to run:

$ export MASTER_NAME=$(kubectl get pods -l role=master --namespace {{ .Release.Namespace }} -o jsonpath='{.items[*].metadata.name}')
$ kubectl exec -it $MASTER_NAME --namespace {{ .Release.Namespace }} -- /bin/bash


To copy your test plans & data to the master pod:
$ kubectl cp sample.jmx $MASTER_NAME:/jmeter/data --namespace {{ .Release.Namespace }}
$ kubectl cp sample.csv $MASTER_NAME:/jmeter/data --namespace {{ .Release.Namespace }}


To run your test in all servers you need first a list of all servers IPs (comma-separated) and then you can run your test:
$ export SERVER_IPS=$(kubectl get pods -l role=server --namespace {{ .Release.Namespace }} -o jsonpath='{.items[*].status.podIP}' | tr ' ' ',')
$ kubectl exec -it $MASTER_NAME --namespace {{ .Release.Namespace }} -- jmeter -n -t /jmeter/sample.jmx -R $SERVER_IPS
